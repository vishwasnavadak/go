{"version":3,"sources":["Shortener.js","App.js","index.js"],"names":["FETCH_URL","gql","CAMPAIGN_URL","Shortener","props","result","useQuery","skip","match","variables","url","params","shorturl","loading","error","data","className","aria-label","console","log","window","location","href","urlshortener","length","long_url","App","basename","exact","path","component","client","ApolloClient","link","createHttpLink","uri","process","headers","cache","InMemoryCache","ReactDOM","render","document","getElementById"],"mappings":"ydAKA,IAAMA,EAAYC,IAAH,KASTC,EAAY,+EA8CHC,EA5CG,SAAAC,GAAU,IAOtBC,EAPqB,EACQC,YAASN,EAAW,CACnDO,MAAOH,EAAMI,MACbC,UAAW,CACTC,IAAKN,EAAMI,MAAMG,OAAOC,YAHpBC,EADiB,EACjBA,QAASC,EADQ,EACRA,MAAOC,EADC,EACDA,KAOxB,GAAIF,EACFR,EACE,uBAAGW,UAAU,WACX,0BAAMA,UAAU,UAAUC,aAAW,uBACnC,kBAAC,IAAD,OAEF,0BAAMD,UAAU,gBAAhB,wBAGC,GAAIF,EACTI,QAAQC,IAAI,UAAWL,GACvBT,EACE,uBAAGW,UAAU,mBACX,0BAAMC,aAAW,mBACf,kBAAC,IAAD,QAING,OAAOC,SAASC,KAAhB,UA7BW,yBA6BX,OAAsCpB,QACjC,GAAIa,GAAQA,EAAKQ,cAAgBR,EAAKQ,aAAaC,OAAQ,CAAC,IACzDC,EAAaV,EAAKQ,aAAa,GAA/BE,SACRL,OAAOC,SAASC,KAAhB,UAA0BG,GAA1B,OAAqCvB,QACC,IAA7Ba,EAAKQ,aAAaC,SAC3BnB,EACE,uBAAGW,UAAU,mBACX,0BAAMC,aAAW,mBACf,kBAAC,IAAD,QAING,OAAOC,SAASC,KAAhB,UAzCW,yBAyCX,OAAsCpB,IAGxC,OAAO,yBAAKc,UAAU,aAAaX,IClCtBqB,G,MAlBH,WACV,OACE,kBAAC,IAAD,CAAYC,SAAS,KACnB,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEC,OAAK,EACLC,KAAK,IACLC,UAAW,WAET,OADAV,OAAOC,SAASC,KAAO,uBAChB,QAGX,kBAAC,IAAD,CAAOO,KAAK,aAAaC,UAAW3B,QCRtC4B,EAAS,IAAIC,IAAa,CAC9BC,KAAMC,YAAe,CACnBC,IAAKC,6DACLC,QAAS,CACP,wBAAyBD,uBACzB,eAAgB,sBAGpBE,MAAO,IAAIC,MAGbC,IAASC,OACP,kBAAC,IAAD,CAAgBV,OAAQA,GACtB,kBAAC,EAAD,OAEFW,SAASC,eAAe,W","file":"static/js/main.ea3615ab.chunk.js","sourcesContent":["import React from \"react\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { FaUniversalAccess, FaRegDizzy } from \"react-icons/fa\";\n\nconst FETCH_URL = gql`\n  query urlshortener($url: String!) {\n    urlshortener(where: { short_url: { _eq: $url } }) {\n      long_url\n    }\n  }\n`;\n\nconst HOME_PAGE = `https://vishwas.tech/`;\nconst CAMPAIGN_URL = `?utm_source=vishwas.tech/go&utm_medium=URLshortener&utm_campaign=URLRedirect`;\n\nconst Shortener = props => {\n  const { loading, error, data } = useQuery(FETCH_URL, {\n    skip: !props.match,\n    variables: {\n      url: props.match.params.shorturl\n    }\n  });\n  let result;\n  if (loading) {\n    result = (\n      <p className=\"loading\">\n        <span className=\"spinner\" aria-label=\"Redirecting Spinner\">\n          <FaUniversalAccess />\n        </span>\n        <span className=\"loading-text\">Redirecting...</span>\n      </p>\n    );\n  } else if (error) {\n    console.log(\"Error: \", error);\n    result = (\n      <p className=\"spinner loading\">\n        <span aria-label=\"Loading Spinner\">\n          <FaRegDizzy />\n        </span>\n      </p>\n    );\n    window.location.href = `${HOME_PAGE}${CAMPAIGN_URL}`;\n  } else if (data && data.urlshortener && data.urlshortener.length) {\n    const { long_url } = data.urlshortener[0];\n    window.location.href = `${long_url}${CAMPAIGN_URL}`;\n  } else if (data.urlshortener.length === 0) {\n    result = (\n      <p className=\"spinner loading\">\n        <span aria-label=\"Loading Spinner\">\n          <FaRegDizzy />\n        </span>\n      </p>\n    );\n    window.location.href = `${HOME_PAGE}${CAMPAIGN_URL}`;\n  }\n\n  return <div className=\"container\">{result}</div>;\n};\n\nexport default Shortener;\n","import React from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport Shortener from \"./Shortener\";\nimport \"./style.css\";\n\nconst App = () => {\n  return (\n    <HashRouter basename=\"/\">\n      <Switch>\n        <Route\n          exact\n          path=\"/\"\n          component={() => {\n            window.location.href = \"https://vishwas.tech\";\n            return null;\n          }}\n        />\n        <Route path=\"/:shorturl\" component={Shortener} />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { createHttpLink } from \"apollo-link-http\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\n\nimport App from \"./App\";\n\nconst client = new ApolloClient({\n  link: createHttpLink({\n    uri: process.env.REACT_APP_HASURA_ENDPOINT,\n    headers: {\n      \"x-hasura-admin-secret\": process.env.REACT_APP_HASURA_SECRET,\n      \"content-type\": \"application/json\"\n    }\n  }),\n  cache: new InMemoryCache()\n});\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}