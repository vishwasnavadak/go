{"version":3,"sources":["Shortener.js","App.js","index.js"],"names":["FETCH_URL","gql","Shortener","props","result","useQuery","skip","match","variables","url","params","shorturl","loading","error","data","console","log","urlshortner","length","long_url","window","location","href","App","basename","exact","path","component","client","ApolloClient","link","createHttpLink","uri","process","headers","cache","InMemoryCache","ReactDOM","render","document","getElementById"],"mappings":"0bAIA,IAAMA,EAAYC,IAAH,KA4BAC,EApBG,SAAAC,GAAU,IAOtBC,EAPqB,EACQC,YAASL,EAAW,CACnDM,MAAOH,EAAMI,MACbC,UAAW,CACTC,IAAKN,EAAMI,MAAMG,OAAOC,YAHpBC,EADiB,EACjBA,QAASC,EADQ,EACRA,MAAOC,EADC,EACDA,KAOxB,GAAIF,EACFR,EAAS,eACJ,GAAIS,EACTE,QAAQC,IAAI,aAAcH,GAC1BT,EAAS,aACJ,GAAIU,GAAQA,EAAKG,aAAeH,EAAKG,YAAYC,OAAQ,CAAC,IACvDC,EAAaL,EAAKG,YAAY,GAA9BE,SACRC,OAAOC,SAASC,KAAOH,EAEzB,OAAO,6BAAMf,ICPAmB,EAlBH,WACV,OACE,kBAAC,IAAD,CAAYC,SAAS,KACnB,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEC,OAAK,EACLC,KAAK,IACLC,UAAW,WAET,OADAP,OAAOC,SAASC,KAAO,uBAChB,QAGX,kBAAC,IAAD,CAAOI,KAAK,aAAaC,UAAWzB,OCPtC0B,EAAS,IAAIC,IAAa,CAC9BC,KAAMC,YAAe,CACnBC,IAAKC,6DACLC,QAAS,CACP,wBAAyBD,uBACzB,eAAgB,sBAGpBE,MAAO,IAAIC,MAGbC,IAASC,OACP,kBAAC,IAAD,CAAgBV,OAAQA,GACtB,kBAAC,EAAD,OAEFW,SAASC,eAAe,W","file":"static/js/main.8e10d6a7.chunk.js","sourcesContent":["import React from \"react\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\nconst FETCH_URL = gql`\n  query urlShortner($url: String!) {\n    urlshortner(where: { short_url: { _eq: $url } }) {\n      long_url\n    }\n  }\n`;\n\nconst Shortener = props => {\n  const { loading, error, data } = useQuery(FETCH_URL, {\n    skip: !props.match,\n    variables: {\n      url: props.match.params.shorturl\n    }\n  });\n  let result;\n  if (loading) {\n    result = \"Loading\";\n  } else if (error) {\n    console.log(\"TCL: error\", error);\n    result = \"Error\";\n  } else if (data && data.urlshortner && data.urlshortner.length) {\n    const { long_url } = data.urlshortner[0];\n    window.location.href = long_url;\n  }\n  return <div>{result}</div>;\n};\n\nexport default Shortener;\n","import React from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport Shortener from \"./Shortener\";\n\nconst App = () => {\n  return (\n    <HashRouter basename=\"/\">\n      <Switch>\n        <Route\n          exact\n          path=\"/\"\n          component={() => {\n            window.location.href = \"https://vishwas.tech\";\n            return null;\n          }}\n        />\n        <Route path=\"/:shorturl\" component={Shortener} />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { createHttpLink } from \"apollo-link-http\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\n\nimport App from \"./App\";\n\nconst client = new ApolloClient({\n  link: createHttpLink({\n    uri: process.env.REACT_APP_HASURA_ENDPOINT,\n    headers: {\n      \"x-hasura-admin-secret\": process.env.REACT_APP_HASURA_SECRET,\n      \"content-type\": \"application/json\"\n    }\n  }),\n  cache: new InMemoryCache()\n});\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}